<!DOCTYPE html>
<html>
	<head>
		<title>智能设备运维监管中心</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link rel="stylesheet" href="css/animate.min.css">
		<link rel="stylesheet" href="css/default.css">
		<link rel="stylesheet" href="js/jqgrid/css/ui.jqgrid.css" />
		<link rel="stylesheet" href="js/jqgrid/css/css/redmond/jquery-ui-1.8.16.custom.css" />
		<link rel="stylesheet" href="css/nodetimer.css"/>
	</head>

	<style>

		.ui-jqgrid-btable td{
			color: cadetblue;
			background-color: #02091f;
		}

		.ui-jqgrid-bdiv{
			background-color: #02091f;
		}

	</style>
	<body>

		<script src="js/jquery.min.js"></script>
		<script src="js/three.js"></script>
		<script src="js/tween.min.js"></script>
		<script src="js/TrackballControls.js"></script>
		<script src="js/CSS3DRenderer.js"></script>
		<script src="js/highcharts.js"></script>
		<script type="text/javascript" src="js/jqgrid/js/jquery.jqGrid.src.js"></script>
		<script type="text/javascript" src="js/jqgrid/js/i18n/grid.locale-cn.js"></script>

		<div class="title">
			<img src="img/title.png" class="title-img">
			<div class="title-name">运维监管中心</div>
		</div>
		<div class="leftContent">
			<div class="contentBox">
				<div class="left-box-top left-box-middle">
					<div class="left-box-title"><img src="img/nav.png" class="t-img">当前态势</div>
					<div class="ts-box">
						<div class="img-ms">设备在线率</div>
						<div class="line-ms"></div>
						<div class="img-content">58%</div>
						<div class="ts-left">
							<img src="./img/infodata.png">
						</div>
						<div class="ts-right">
							<table>
								<tr><td><div class="element1"></div></td><td>在线数</td><td><a onclick="showDiv('numDiv','1')">5</a></td></tr>
								<tr><td><div class="element2"></div></td><td>离线数</td><td><a onclick="showDiv('numDiv','2')">5</a></td></tr>
								<tr><td><div class="element3"></div></td><td>运行数</td><td><a onclick="showDiv('numDiv','3')">5</a></td></tr>
								<tr><td><div class="element4"></div></td><td>异常数</td><td><a onclick="showDiv('numDiv','4')">5</a></td></tr>
							</table>
						</div>
					</div>
				</div>
				<div class="left-box-bottom">
					<div class="left-box-title"><img src="img/nav.png" class="t-img">策略态势</div>
					<div class="grid-box">
						<table class="table-grid">
							<tr><td>策略方案</td><td>执行时间</td><td>执行个数</td></tr>
							<tr><td>开灯</td><td>19:00</td><td>120</td></tr>
							<tr><td>关灯</td><td>19:00</td><td>111</td></tr>
							<tr><td>关闭</td><td>19:00</td><td>222</td></tr>
							<tr><td>开灯</td><td>19:00</td><td>56</td></tr>
							<tr><td>开灯</td><td>19:00</td><td>78</td></tr>
							<tr><td>开灯</td><td>19:00</td><td>78</td></tr>
							<tr><td>开灯</td><td>19:00</td><td>78</td></tr>
							<tr><td>开灯</td><td>19:00</td><td>78</td></tr>
						</table>
					</div>
				</div>
			</div>
		</div>
		<div class="rightContent">
			<div class="contentBox">
				<div class="right-box-top right-box-middle">
					<div>
						<div class="right-box-title"><img src="img/nav.png" class="t-img">设备类型分布（设备用途）</div>
						<img class="more" src="img/more.png" title="更多" onclick="showDiv('typeDiv')"></img>
						<div style="clear: both"></div>
					</div>
					<div id="eh1"></div>
				</div>
				<div class="right-box-bottom">
					<div>
						<div class="right-box-title"><img src="img/nav.png" class="t-img">设备日志</div>
						<img class="more" src="img/more.png" title="更多" onclick="showDiv('logDiv')"></img>
						<div style="clear: both"></div>
					</div>
					<div class="div-a"><a style="color:aqua" onclick="changetable1()" id="t1a">违规信息</a><a style="color:currentColor" onclick="changetable2()" id="t2a">报警信息</a></div>
					<div class="grid-box">
						<table class="table-grid" id="t1">
							<tr><td>设备名称</td><td>违规时间</td><td>违规类型</td></tr>
							<tr><td>201空调</td><td>19:00</td><td>温控违规</td></tr>
							<tr><td>201空调</td><td>19:00</td><td>温控违规</td></tr>
							<tr><td>201空调</td><td>19:00</td><td>温控违规</td></tr>
							<tr><td>201空调</td><td>19:00</td><td>温控违规</td></tr>
							<tr><td>201空调</td><td>19:00</td><td>温控违规</td></tr>
							<tr><td>201空调</td><td>19:00</td><td>温控违规</td></tr>
							<tr><td>201空调</td><td>19:00</td><td>温控违规</td></tr>
						</table>
						<table class="table-grid" style="display: none" id="t2">
							<tr><td>设备名称</td><td>报警时间</td><td>报警类型</td></tr>
							<tr><td>201空调</td><td>19:00</td><td>温控报警</td></tr>
							<tr><td>201空调</td><td>19:00</td><td>温控报警</td></tr>
							<tr><td>201空调</td><td>19:00</td><td>温控报警</td></tr>
							<tr><td>201空调</td><td>19:00</td><td>温控报警</td></tr>
							<tr><td>201空调</td><td>19:00</td><td>温控报警</td></tr>
							<tr><td>201空调</td><td>19:00</td><td>温控报警</td></tr>
							<tr><td>201空调</td><td>19:00</td><td>温控报警</td></tr>
						</table>
					</div>
				</div>
			</div>
		</div>
		<div class="bottomContent">
			<div class="contentBoxBottom">
				<div class="bottom-box bottom-box-left">
					<div>
						<div class="right-box-title"><img src="img/nav.png" class="t-img">设备在线情况（最近24小时）</div>
						<img class="more" src="img/more.png" title="更多" onclick="showDiv('onlineDiv')"></img>
						<div style="clear: both"></div>
					</div>
					<div id="eh2"></div>
				</div>
				<div class="bottom-box-center"></div>
				<div class="bottom-box bottom-box-right">
					<div>
						<div class="right-box-title"><img src="img/nav.png" class="t-img">设备运行情况（最近24小时）</div>
						<img class="more" src="img/more.png" title="更多" onclick="showDiv('openDiv')"></img>
						<div style="clear: both"></div>
					</div>
					<div id="eh3"></div>
				</div>
			</div>
		</div>
		<div class="datawap">
			<img src="img/all.png" class="info-all" title="分布全貌" style="display: none">
			<img src="img/qh.png" class="info-qh" title="切换区域" onclick="showDiv('allinfoDiv')">
			<div id="container"></div>
			<div id="menu">
				<button id="table">表格</button>
				<button id="sphere">球球</button>
				<button id="helix">螺旋</button>
				<button id="grid">格子</button>
			</div>
		</div>
		<div class="show_info animated" style="display:none;">
			<div class="info_my">
				<div class="info_img"><img src="img/node.png" /></div>
				<div class="info_mem">
					<div class="nickname">101教室空调</div>
					<div class="id">编号：587962156</div>
					<div class="vote">状态：报警</div>
				</div>
			</div>
			<div class="intro">终端设备发生阈值报警，请尽快解决！</div>
		</div>

		<div id="infoDiv" style="display: none" class="show-div">
			<div class="info-top">
				<img src="img/close.png" onclick="closeDiv()" class="closeIcon">
				<div class="info-top-box">
					<table class="info-top-table">
						<tr>
							<td style="width:60px;border-right: 1px solid darkgray;"><select class="year-select">
							</select></td>
							<td style="width:60px;border-right: 1px solid darkgray;"><select>
								<option>1月</option>
								<option>2月</option>
								<option>3月</option>
								<option>4月</option>
								<option>5月</option>
								<option>6月</option>
								<option>7月</option>
								<option>8月</option>
								<option>9月</option>
								<option>10月</option>
								<option>11月</option>
								<option>12月</option>
							</select></td>
							<td><a>01</a></td><td><a>02</a></td><td><a>03</a></td><td><a>04</a></td><td><a>05</a></td>
							<td><a>06</a></td><td><a>07</a></td><td><a>08</a></td><td><a>09</a></td><td><a>10</a></td>
							<td><a>11</a></td><td><a>12</a></td><td><a>13</a></td><td><a>14</a></td><td><a>15</a></td>
							<td><a>16</a></td><td><a>17</a></td><td><a>18</a></td><td><a>19</a></td><td><a>20</a></td>
							<td><a>21</a></td><td><a>22</a></td><td><a>23</a></td><td><a>24</a></td><td><a>25</a></td>
							<td><a>26</a></td><td><a>27</a></td><td><a>28</a></td><td><a>29</a></td><td><a>30</a></td>
							<td><a>31</a></td>
						</tr>
					</table>
				</div>
			</div>
			<div class="info-bottom">
				<div class="info-bottom-left test">
					<ul class="time-axis"></ul>
				</div>
				<div class="info-bottom-right">
					<div class="info-bottom-right-top">
						<img src="img/ceshi.png" style="width:100%;display:none">
						<div class="monitor-info d3">
							<div class="dbox">
								<div class="phead">策略信息</div>
								<div class="dbox-box">
									<p class="pbox">周一09:00：开机</p>
									<p class="pbox">周一12:00：关机</p>
									<p class="pbox">周二09:00：开机</p>
									<p class="pbox">周二09:00：开机</p>
									<p class="pbox">周二09:00：开机</p>
									<p class="pbox">周二09:00：开机</p>
									<p class="pbox">周二09:00：开机</p>
									<p class="pbox">周二09:00：开机</p>
									<p class="pbox">周二09:00：开机</p>
									<p class="pbox">周二09:00：开机</p>
									<p class="pbox">周二09:00：开机</p>
									<p class="pbox">周二09:00：开机</p>
									<p class="pbox">周二09:00：开机</p>
									<p class="pbox">周二09:00：开机</p>
									<p class="pbox">周二09:00：开机</p>
									<p class="pbox">周二09:00：开机</p>
								</div>
							</div>
						</div>
						<div class="monitor-info d3">
							<div class="dbox">
								<div class="phead">基本信息</div>
								<div class="dbox-box">
									<p class="pbox">品牌：大金</p>
									<p class="pbox">品牌：大金</p>
									<p class="pbox">品牌：大金</p>
								</div>
							</div>
						</div>
						<div class="monitor-info d3">
							<div class="dbox">
								<div class="phead">运行信息</div>
								<div class="dbox-box">
									<p class="pbox">状态：启用</p>
									<p class="pbox">状态：启用</p>
									<p class="pbox">状态：启用</p>
								</div>
							</div>
						</div>
					</div>
					<div class="info-bottom-right-bottom">
						<div id="eh-power"></div>
					</div>
				</div>
			</div>
		</div>
		<div id="numDiv" style="display: none" class="show-div">
			<table id="listnum" class="data-table"></table>
			<div id="pagernum"></div>
			<img src="img/close.png" onclick="closeDiv()" class="tablecloseIcon">
		</div>
		<div id="allinfoDiv" style="display: none" class="show-div">
			<img src="img/close.png" onclick="closeDiv()" class="piccloseIcon">
			<img class="allinfo-pic-left" src="img/left.png"></img>
			<img class="allinfo-pic-right" src="img/right.png"></img>
			<div class="allinfo-pic">
				<table>
					<tr><td colspan="2"><img src="img/a.png"></td></tr>
					<tr><td>在线数</td><td class="td-left">50</td></tr>
					<tr><td>离线数</td><td class="td-left">11</td></tr>
					<tr><td>异常数</td><td class="td-left">12</td></tr>
				</table>
			</div>
			<div class="allinfo-pic">
				<table>
					<tr><td colspan="2"><img src="img/a.png"></td></tr>
					<tr><td>在线数</td><td class="td-left">50</td></tr>
					<tr><td>离线数</td><td class="td-left">11</td></tr>
					<tr><td>异常数</td><td class="td-left">12</td></tr>
				</table>
			</div>
			<div class="allinfo-pic">
				<table>
					<tr><td colspan="2"><img src="img/a.png"></td></tr>
					<tr><td>在线数</td><td class="td-left">50</td></tr>
					<tr><td>离线数</td><td class="td-left">11</td></tr>
					<tr><td>异常数</td><td class="td-left">12</td></tr>
				</table>
			</div>
			<div class="allinfo-pic">
				<table>
					<tr><td colspan="2"><img src="img/a.png"></td></tr>
					<tr><td>在线数</td><td class="td-left">50</td></tr>
					<tr><td>离线数</td><td class="td-left">11</td></tr>
					<tr><td>异常数</td><td class="td-left">12</td></tr>
				</table>
			</div>
		</div>
		<div id="changeDiv" style="display: none" class="show-div">
		</div>
		<div id="typeDiv" style="display: none" class="show-div">
			<table id="listtype" class="data-table"></table>
			<div id="pagertype"></div>
			<img src="img/close.png" onclick="closeDiv()" class="tablecloseIcon">
		</div>
		<div id="logDiv" style="display: none" class="show-div">
			<div class="logall">
				<div class="m1" title="当前违规数"><img src="img/count1.png"><span>5</span></div>
				<div class="m2" title="今日违规数"><img src="img/count2.png"><span>15</span></div>
				<div class="m3" title="总计违规数"><img src="img/count3.png"><span>200</span></div>
			</div>
			<table id="listlog" class="data-table"></table>
			<div id="pagerlog"></div>
			<img src="img/close.png" onclick="closeDiv()" class="tablecloseIcon">
		</div>
		<div id="openDiv" style="display: none" class="show-div">
			<div class="info-top">
				<img src="img/close.png" onclick="closeDiv()" class="closeIcon">
				<div class="info-top-box">
					<table class="info-top-table">
						<tr>
							<td style="width:60px;border-right: 1px solid darkgray;"><select class="year-select">
							</select></td>
							<td style="width:60px;border-right: 1px solid darkgray;"><select>
								<option>1月</option>
								<option>2月</option>
								<option>3月</option>
								<option>4月</option>
								<option>5月</option>
								<option>6月</option>
								<option>7月</option>
								<option>8月</option>
								<option>9月</option>
								<option>10月</option>
								<option>11月</option>
								<option>12月</option>
							</select></td>
							<td><a>01</a></td><td><a>02</a></td><td><a>03</a></td><td><a>04</a></td><td><a>05</a></td>
							<td><a>06</a></td><td><a>07</a></td><td><a>08</a></td><td><a>09</a></td><td><a>10</a></td>
							<td><a>11</a></td><td><a>12</a></td><td><a>13</a></td><td><a>14</a></td><td><a>15</a></td>
							<td><a>16</a></td><td><a>17</a></td><td><a>18</a></td><td><a>19</a></td><td><a>20</a></td>
							<td><a>21</a></td><td><a>22</a></td><td><a>23</a></td><td><a>24</a></td><td><a>25</a></td>
							<td><a>26</a></td><td><a>27</a></td><td><a>28</a></td><td><a>29</a></td><td><a>30</a></td>
							<td><a>31</a></td>
						</tr>
					</table>
				</div>
			</div>
			<div class="info-content">
				<div id="openall"></div>
			</div>
		</div>
		<div id="onlineDiv" style="display: none" class="show-div">
			<div class="info-top">
				<img src="img/close.png" onclick="closeDiv()" class="closeIcon">
				<div class="info-top-box">
					<table class="info-top-table">
						<tr>
							<td style="width:60px;border-right: 1px solid darkgray;"><select class="year-select">
							</select></td>
							<td style="width:60px;border-right: 1px solid darkgray;"><select>
								<option>1月</option>
								<option>2月</option>
								<option>3月</option>
								<option>4月</option>
								<option>5月</option>
								<option>6月</option>
								<option>7月</option>
								<option>8月</option>
								<option>9月</option>
								<option>10月</option>
								<option>11月</option>
								<option>12月</option>
							</select></td>
							<td><a>01</a></td><td><a>02</a></td><td><a>03</a></td><td><a>04</a></td><td><a>05</a></td>
							<td><a>06</a></td><td><a>07</a></td><td><a>08</a></td><td><a>09</a></td><td><a>10</a></td>
							<td><a>11</a></td><td><a>12</a></td><td><a>13</a></td><td><a>14</a></td><td><a>15</a></td>
							<td><a>16</a></td><td><a>17</a></td><td><a>18</a></td><td><a>19</a></td><td><a>20</a></td>
							<td><a>21</a></td><td><a>22</a></td><td><a>23</a></td><td><a>24</a></td><td><a>25</a></td>
							<td><a>26</a></td><td><a>27</a></td><td><a>28</a></td><td><a>29</a></td><td><a>30</a></td>
							<td><a>31</a></td>
						</tr>
					</table>
				</div>
			</div>
			<div class="info-content">
				<div id="onlineall"></div>
			</div>
		</div>

		<script>
            var colorArr = ['#3887F9', '#0AEDF5','#22D3FF','#CCF5FF'];

			var personArray = new Array;
    		var CurPersonNum = 0;
    		// animate
    		var _in = ['bounceIn','bounceInDown','bounceInLeft','bounceInRight','bounceInUp','fadeIn','fadeInDown','fadeInDownBig','fadeInLeft','fadeInLeftBig','fadeInRight','fadeInRightBig','fadeInUp','fadeInUpBig','rotateIn','rotateInDownLeft','rotateInDownRight','rotateInUpLeft','rotateInUpRight','slideInDown','slideInLeft','slideInRight'];
    		var _out = ['bounceOut','bounceOutDown','bounceOutLeft','bounceOutRight','bounceOutUp','fadeOut','fadeOutDown','fadeOutDownBig','fadeOutLeft','fadeOutLeftBig','fadeOutRight','fadeOutRightBig','fadeOutUp','fadeOutUpBig','rotateOut','rotateOutDownLeft','rotateOutDownRight','rotateOutUpLeft','rotateOutUpRight','slideOutDown','slideOutLeft','slideOutRight'];
    		// 模拟推送数据
			var s = setInterval(function(){
				// get animate
				var rand_in = parseInt(Math.random() * _in.length,10);
    			var rand_out = parseInt(Math.random() * _out.length,10);
				if(CurPersonNum >= personArray.length){
					CurPersonNum = 0;
				}
				$('.show_info').show();
				$('.show_info').addClass(_in[rand_in]);
				setTimeout(function(){
					$('.show_info').removeClass(_in[rand_in]);
					// 更改展示的图片
					var img = document.getElementsByClassName('element')[CurPersonNum].getElementsByTagName('img')[0];
					img.setAttribute('src','img/b.png');
					++CurPersonNum;
					setTimeout(function(){
						$('.show_info').addClass(_out[rand_out]);
						setTimeout(function(){
							$('.show_info').removeClass(_out[rand_out]);
							$('.show_info').hide();
						},1000);
					},1500);
				},1000);
			},4500);

			// 生成虚拟数据
	        for(var i=0;i<199;i++){
				personArray.push({
		            image: "img/a.png"
		        });
	        }

	        var table = new Array;
		    for (var i = 0; i < personArray.length; i++) {
		        table[i] = new Object();
		        if (i < personArray.length) {
		            table[i] = personArray[i];
		            table[i].src = personArray[i].thumb_image;
		        } 
		        table[i].p_x = i % 20 + 1;
		        table[i].p_y = Math.floor(i / 20) + 1;
		    }

			var camera, scene, renderer;
			var controls;
			var objects = [];
			var targets = { table: [], sphere: [], helix: [], grid: [] };
		</script>

		<script>

            init();
            animate();
            initEvent();
            initWeb();
            initData();

            function init() {

                var d = new Date();
                var nowyear = d.getFullYear();
                for(var i=0;i<5;i++){
                    $(".year-select").append("<option>"+(nowyear-i)+"</option>");
				}

                camera = new THREE.PerspectiveCamera( 40, (window.innerWidth - 602) / (window.innerHeight - 200), 1, 10000 );
                camera.position.z = 3000;
                scene = new THREE.Scene();

                // table
                for ( var i = 0; i < table.length; i ++ ) {

                    var element = document.createElement( 'div' );
                    element.className = 'element';
                    element.style.backgroundColor = 'rgba(0,127,127,' + ( Math.random() * 0.5 + 0.25 ) + ')';

                    var elementdiv = document.createElement( 'div' );
                    elementdiv.className = 'elementbox';
                    elementdiv.innerHTML = "202空调";
                    element.appendChild( elementdiv );

                    var img = document.createElement('img');
                    img.src = table[ i ].image;
                    img.setAttribute("onclick", "showDiv('infoDiv')");
                    elementdiv.appendChild( img );

                    var object = new THREE.CSS3DObject( element );
                    object.position.x = Math.random() * 4000 - 2000;
                    object.position.y = Math.random() * 4000 - 2000;
                    object.position.z = Math.random() * 4000 - 2000;
                    scene.add( object );
                    objects.push( object );
                    // 表格需要坐标进行排序的
                    var object = new THREE.Object3D();
                    // object.position.x = ( table[ i + 3 ] * 140 ) - 1330;
                    // object.position.y = - ( table[ i + 4 ] * 180 ) + 990;
                    object.position.x = ( table[ i ].p_x * 140 ) - 1330;
                    object.position.y = - ( table[ i ].p_y * 180 ) + 990;
                    targets.table.push( object );
                }

                // sphere
                var vector = new THREE.Vector3();
                var spherical = new THREE.Spherical();

                for ( var i = 0, l = objects.length; i < l; i ++ ) {
                    var phi = Math.acos( -1 + ( 2 * i ) / l );
                    var theta = Math.sqrt( l * Math.PI ) * phi;
                    var object = new THREE.Object3D();
                    spherical.set( 800, phi, theta );
                    object.position.setFromSpherical( spherical );
                    vector.copy( object.position ).multiplyScalar( 2 );
                    object.lookAt( vector );
                    targets.sphere.push( object );
                }

                // helix
                var vector = new THREE.Vector3();
                var cylindrical = new THREE.Cylindrical();

                for ( var i = 0, l = objects.length; i < l; i ++ ) {
                    var theta = i * 0.175 + Math.PI;
                    var y = - ( i * 5 ) + 450;
                    var object = new THREE.Object3D();
                    // 参数一 圈的大小 参数二 左右间距 参数三 上下间距
                    cylindrical.set( 900, theta, y );
                    object.position.setFromCylindrical( cylindrical );
                    vector.x = object.position.x * 2;
                    vector.y = object.position.y;
                    vector.z = object.position.z * 2;
                    object.lookAt( vector );
                    targets.helix.push( object );
                }

                // grid
                for ( var i = 0; i < objects.length; i ++ ) {
                    var object = new THREE.Object3D();
                    object.position.x = ( ( i % 5 ) * 400 ) - 800; // 400 图片的左右间距  800 x轴中心店
                    object.position.y = ( - ( Math.floor( i / 5 ) % 5 ) * 300 ) + 500;  // 500 y轴中心店
                    object.position.z = ( Math.floor( i / 25 ) ) * 200 - 800;// 300调整 片间距 800z轴中心店
                    targets.grid.push( object );
                }

                // 渲染
                renderer = new THREE.CSS3DRenderer();
                renderer.setSize( window.innerWidth - 602, window.innerHeight - 200 );
                renderer.domElement.style.position = 'absolute';
                document.getElementById( 'container' ).appendChild( renderer.domElement );

                // 鼠标控制
                controls = new THREE.TrackballControls( camera, renderer.domElement );
                controls.rotateSpeed = 0.5;
                controls.minDistance = 500;
                controls.maxDistance = 6000;
                controls.addEventListener( 'change', render );
            }

            function animate() {
                // 让场景通过x轴或者y轴旋转  & z
                // scene.rotation.x += 0.011;
                scene.rotation.y += 0.008;
                requestAnimationFrame( animate );
                TWEEN.update();
                controls.update();
                // 渲染循环
                render();
            }

            function render() {
                renderer.render( scene, camera );
            }

            function transform( targets, duration ) {
                TWEEN.removeAll();
                for ( var i = 0; i < objects.length; i ++ ) {
                    var object = objects[ i ];
                    var target = targets[ i ];
                    new TWEEN.Tween( object.position )
                        .to( { x: target.position.x, y: target.position.y, z: target.position.z }, Math.random() * duration + duration )
                        .easing( TWEEN.Easing.Exponential.InOut )
                        .start();
                    new TWEEN.Tween( object.rotation )
                        .to( { x: target.rotation.x, y: target.rotation.y, z: target.rotation.z }, Math.random() * duration + duration )
                        .easing( TWEEN.Easing.Exponential.InOut )
                        .start();
                }
                new TWEEN.Tween( this )
                    .to( {}, duration * 2 )
                    .onUpdate( render )
                    .start();
            }

            function onWindowResize() {
                camera.aspect = (window.innerWidth - 602) / (window.innerHeight - 200);
                camera.updateProjectionMatrix();
                renderer.setSize( window.innerWidth - 602, window.innerHeight - 200 );
                render();
            }

            function initEvent(){
				window.addEventListener( 'resize', onWindowResize, false );
            }

            function initWeb(){
                var button = document.getElementById( 'table' );
                button.addEventListener( 'click', function ( event ) {
                    transform( targets.table, 2000 );
                }, false );

                var button = document.getElementById( 'sphere' );
                button.addEventListener( 'click', function ( event ) {
                    transform( targets.sphere, 2000 );
                }, false );

                var button = document.getElementById( 'helix' );
                button.addEventListener( 'click', function ( event ) {
                    transform( targets.helix, 2000 );
                }, false );

                var button = document.getElementById( 'grid' );
                button.addEventListener( 'click', function ( event ) {
                    transform( targets.grid, 2000 );
                }, false );

                transform( targets.table, 2000 );

                changeAuto();
            }

            function changeAuto(){
				// 自动更换
                var ini = 0;
                setInterval(function(){
                    ini = ini >= 4 ? 0 : ini;
                    ++ini;
                    switch(ini){
                        case 1:
                            transform( targets.sphere, 1000 );
                            break;
                        case 2:
                            transform( targets.helix, 1000 );
                            break;
                        case 3:
                            transform( targets.grid, 1000 );
                            break;
                        case 4:
                            transform( targets.table, 1000 );
                            break;
                    }
                },8000);
			}

			function changetable1(){
				$("#t1").show();
                $("#t1a").css("color","aqua");
                $("#t2a").css("color","currentColor");
                $("#t2").hide();
			}

            function changetable2(){
                $("#t2").show();
                $("#t2a").css("color","aqua");
                $("#t1a").css("color","currentColor");
                $("#t1").hide();
            }

            function closeDiv(){
                $(".show-div").hide();
			}

            var onlineDivfirst = true;
            var openDivfirst = true;
            var infoDivfirst = true;
            function showDiv(id){
                $(".show-div").hide();
                $("#" + id).show();

                if(id == "onlineDiv"){
					if(onlineDivfirst){
                        showOnline('onlineall');
                        onlineDivfirst = false;
					}
				}else if(id == "openDiv"){
                    if(openDivfirst){
                        showOpen('openall');
                        openDivfirst = false;
                    }
				}else if(id == "numDiv"){
                    //创建jqGrid组件
                    jQuery("#listnum").jqGrid(
                        {
                            url : 'data/JSONData.json',//组件创建完成之后请求数据的url
                            datatype : "json",//请求数据返回的类型。可选json,xml,txt
                            colNames : [ 'Inv No', 'Date', 'Client', 'Amount', 'Tax','Total', 'Notes' ],//jqGrid的列显示名字
                            colModel : [ //jqGrid每一列的配置信息。包括名字，索引，宽度,对齐方式.....
                                {name : 'id',index : 'id',width : 55},
                                {name : 'invdate',index : 'invdate',width : 90},
                                {name : 'name',index : 'name asc, invdate',width : 100},
                                {name : 'amount',index : 'amount',width : 80,align : "right"},
                                {name : 'tax',index : 'tax',width : 80,align : "right"},
                                {name : 'total',index : 'total',width : 80,align : "right"},
                                {name : 'note',index : 'note',width : 150,sortable : false}
                            ],
                            rowNum : 10,//一页显示多少条
                            width : 798,
							height : 324,
                            rowList : [ 10, 20, 30 ],//可供用户选择一页显示多少条
                            pager : '#pagernum',//表格页脚的占位符(一般是div)的id
                            sortname : 'id',//初始化的时候排序的字段
                            sortorder : "desc",//排序方式,可选desc,asc
                            mtype : "post",//向后台请求数据的ajax的类型。可选post,get
                            viewrecords : true,
                            hidegrid : false,
                        	caption : "数据明细"//表格的标题名字
                        });
					/*创建jqGrid的操作按钮容器*/
					/*可以控制界面上增删改查的按钮是否显示*/
					jQuery("#listnum").jqGrid('navGrid', '#pagernum', {edit : false,add : false,del : false});
                }else if(id == "typeDiv"){
                    //创建jqGrid组件
                    jQuery("#listtype").jqGrid(
                        {
                            url : 'data/JSONData.json',//组件创建完成之后请求数据的url
                            datatype : "json",//请求数据返回的类型。可选json,xml,txt
                            colNames : [ 'Inv No', 'Date', 'Client', 'Amount', 'Tax','Total', 'Notes' ],//jqGrid的列显示名字
                            colModel : [ //jqGrid每一列的配置信息。包括名字，索引，宽度,对齐方式.....
                                {name : 'id',index : 'id',width : 55},
                                {name : 'invdate',index : 'invdate',width : 90},
                                {name : 'name',index : 'name asc, invdate',width : 100},
                                {name : 'amount',index : 'amount',width : 80,align : "right"},
                                {name : 'tax',index : 'tax',width : 80,align : "right"},
                                {name : 'total',index : 'total',width : 80,align : "right"},
                                {name : 'note',index : 'note',width : 150,sortable : false}
                            ],
                            rowNum : 10,//一页显示多少条
                            width : 798,
                            height : 324,
                            rowList : [ 10, 20, 30 ],//可供用户选择一页显示多少条
                            pager : '#pagertype',//表格页脚的占位符(一般是div)的id
                            sortname : 'id',//初始化的时候排序的字段
                            sortorder : "desc",//排序方式,可选desc,asc
                            mtype : "post",//向后台请求数据的ajax的类型。可选post,get
                            viewrecords : true,
                            hidegrid : false,
                            caption : "类型详情"//表格的标题名字
                        });
					/*创建jqGrid的操作按钮容器*/
					/*可以控制界面上增删改查的按钮是否显示*/
                    jQuery("#listtype").jqGrid('navGrid', '#pagertype', {edit : false,add : false,del : false});
                }else if(id == "logDiv"){
                    var titlename = "违规信息";
                    var tableurl = "data/JSONData.json"
					//创建jqGrid组件
                    jQuery("#listlog").jqGrid(
                        {
                            url : tableurl,//组件创建完成之后请求数据的url
                            datatype : "json",//请求数据返回的类型。可选json,xml,txt
                            colNames : [ 'Inv No', 'Date', 'Client', 'Amount', 'Tax','Total', 'Notes' ],//jqGrid的列显示名字
                            colModel : [ //jqGrid每一列的配置信息。包括名字，索引，宽度,对齐方式.....
                                {name : 'id',index : 'id',width : 55},
                                {name : 'invdate',index : 'invdate',width : 90},
                                {name : 'name',index : 'name asc, invdate',width : 100},
                                {name : 'amount',index : 'amount',width : 80,align : "right"},
                                {name : 'tax',index : 'tax',width : 80,align : "right"},
                                {name : 'total',index : 'total',width : 80,align : "right"},
                                {name : 'note',index : 'note',width : 150,sortable : false}
                            ],
                            rowNum : 10,//一页显示多少条
                            width : 798,
                            height : 324,
                            rowList : [ 10, 20, 30 ],//可供用户选择一页显示多少条
                            pager : '#pagerlog',//表格页脚的占位符(一般是div)的id
                            sortname : 'id',//初始化的时候排序的字段
                            sortorder : "desc",//排序方式,可选desc,asc
                            mtype : "post",//向后台请求数据的ajax的类型。可选post,get
                            viewrecords : true,
                            hidegrid : false,
                            //caption : titlename//表格的标题名字
                        });
					/*创建jqGrid的操作按钮容器*/
					/*可以控制界面上增删改查的按钮是否显示*/
                    jQuery("#listlog").jqGrid('navGrid', '#pagerlog', {edit : false,add : false,del : false});
                }else if(id == "infoDiv"){
					if(infoDivfirst){
                        showPower("eh-power");
                        infoDivfirst = false;
					}

                    $('.time-axis').empty();
                    $.ajax({
                        type: 'post',
                        url: "/php/bim/getYjList.php",
                        dataType: "json",
                        context: this,
                        error: function (result) {
                        },
                        success: function (result) {
                            if(result && result.rows && result.rows.length>0)
                            {
                                for(var x=0;x<result.rows.length;x++)
                                {
                                    var timestr = result.rows[x].F_time.date;
                                    var html='<li class="time-axis-item">'+
                                        '<div class="time-axis-date">'+timestr.substr(10,9)+'<span></span></div>'+
                                        '<div class="time-axis-title">'+result.rows[x].F_type+'</div>'+
                                        '<p class="time-axis-achievement">'+result.rows[x].F_content+'</p>'+
                                        '</li>';
                                    $('.time-axis').append(html);
                                }
                            }
                        }
                    });
                }else if(id == ""){

                }
			}

            function showPower(id){
                var chart = Highcharts.chart(id,{
                        chart: {
                            backgroundColor:'', //设置无背景色
                            type: 'column'
                        },
                        colors: ['#3887F9', '#0AEDF5','#22D3FF','#CCF5FF'],
                        title: {
                            style: { "color": "#666666", "fontSize": "15px" },
                            text: '24小时用能情况'
                        },
                        legend: {
                            enabled: false
                        },
                        credits:{
                            enabled: false // 禁用版权信息
                        },
                        xAxis: {
                            categories: [
                                '01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24'
                            ],
                            crosshair: true
                        },
                        yAxis: {
                            min: 0,
                            title: {
                                text: ''
                            }
                        },
                        tooltip: {
                            // head + 每个 point + footer 拼接成完整的 table
                            headerFormat: '<div style="font-size:10px;text-align: center;">{point.key}时</div><table>',
                            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                            '<td style="padding:0"><b>{point.y:.1f} 个</b></td></tr>',
                            footerFormat: '</table>',
                            shared: true,
                            useHTML: true
                        },
                        plotOptions: {
                            column: {
                                borderWidth: 0
                            }
                        },
                        series: [{
                            name: '用能',
                            data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4,83.6, 78.8, 98.5, 93.4, 106.0, 84.5, 105.0, 104.3, 91.2, 83.5, 106.6, 92.3]
                        }]
                    },
                    function (chart) {

                    }
                );
            }

			function showOnline(id){
                var chart = Highcharts.chart(id,{
                    chart: {
                        backgroundColor:'', //设置无背景色
                        type: 'column'
                    },
                    colors: ['#3887F9', '#0AEDF5','#22D3FF','#CCF5FF'],
                    title: {
                        style: { "color": "#666666", "fontSize": "15px" },
                        text: '设备在线情况'
                    },
                    legend: {
                        enabled: false
                    },
                    credits:{
                        enabled: false // 禁用版权信息
                    },
                    xAxis: {
                        categories: [
                            '01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24'
                        ],
                        crosshair: true
                    },
                    yAxis: {
                        min: 0,
                        title: {
                            text: ''
                        }
                    },
                    tooltip: {
                        // head + 每个 point + footer 拼接成完整的 table
                        headerFormat: '<div style="font-size:10px;text-align: center;">{point.key}时</div><table>',
                        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.1f} 个</b></td></tr>',
                        footerFormat: '</table>',
                        shared: true,
                        useHTML: true
                    },
                    plotOptions: {
                        column: {
                            borderWidth: 0
                        }
                    },
                    series: [{
                        name: '在线',
                        data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4,83.6, 78.8, 98.5, 93.4, 106.0, 84.5, 105.0, 104.3, 91.2, 83.5, 106.6, 92.3]
                    }, {
                        name: '离线',
                        data: [83.6, 78.8, 98.5, 93.4, 106.0, 84.5, 105.0, 104.3, 91.2, 83.5, 106.6, 92.3,49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
                    }]
                },
                    function (chart) {

                    }
                );
			}

            function showOpen(id){
                var chart = Highcharts.chart(id,{
                    chart: {
                        backgroundColor:'', //设置无背景色
                        type: 'line'
                    },
                    //colors: ['#3D7878', '#707038'],
                    title: {
                        style: { "color": "#666666", "fontSize": "15px" },
                        text: '设备运行情况'
                    },
                    legend: {
                        enabled: false
                    },
                    credits:{
                        enabled: false // 禁用版权信息
                    },
                    xAxis: {
                        categories: [
                            '01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24'
                        ],
                        crosshair: true
                    },
                    yAxis: {
                        min: 0,
                        title: {
                            text: ''
                        }
                    },
                    tooltip: {
                        // head + 每个 point + footer 拼接成完整的 table
                        headerFormat: '<div style="font-size:10px;text-align: center;">{point.key}时</div><table>',
                        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.1f} 个</b></td></tr>',
                        footerFormat: '</table>',
                        shared: true,
                        useHTML: true
                    },
                    plotOptions: {
                        column: {
                            borderWidth: 0
                        }
                    },
                    series: [{
                        name: '运行',
                        data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4,83.6, 78.8, 98.5, 93.4, 106.0, 84.5, 105.0, 104.3, 91.2, 83.5, 106.6, 92.3]
                    }, {
                        name: '停用',
                        data: [83.6, 78.8, 98.5, 93.4, 106.0, 84.5, 105.0, 104.3, 91.2, 83.5, 106.6, 92.3,49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
                    }]
                });
            }

			function initData(){

                Highcharts.chart('eh1', {
                    chart: {
                        backgroundColor:'', //设置无背景色
                        plotBackgroundColor: null,
                        plotBorderWidth: null,
                        plotShadow: false,
                        type: 'pie'
                    },
					colors : ['#3887F9', '#0AEDF5','#22D3FF','#CCF5FF'],
                    legend: {
                        align: 'right',
                        verticalAlign: 'middle',
                        itemStyle:{
                            color:'#B6B9BE',
						}
                    },
                    title: {
                        text: ''
                    },
                    credits:{
                        enabled: false // 禁用版权信息
                    },
                    tooltip: {
                        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b><br/>数量: <b>{point.y}</b>'
                    },
                    plotOptions: {
                        pie: {
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: false
                            },
                            showInLegend: true
                        }
                    },
                    series: [{
                        name: '占比',
                        colorByPoint: true,
                        data: [{
                            name: '大金空调',
                            y: 61,
                            sliced: true,
                            selected: true
                        }, {
                            name: '分体空调',
                            y: 11
                        }, {
                            name: '中央空调',
                            y: 10
                        }]
                    }]
                });

                var chart = Highcharts.chart('eh2',{
                    chart: {
                        backgroundColor:'', //设置无背景色
                        type: 'column'
                    },
                    colors: ['#3887F9', '#0AEDF5','#22D3FF','#CCF5FF'],
                    title: {
                        text: ''
                    },
                    legend: {
                        enabled: false
                    },
                    credits:{
                        enabled: false // 禁用版权信息
                    },
                    xAxis: {
                        categories: [
                            '01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24'
                        ],
                        crosshair: true
                    },
                    yAxis: {
                        min: 0,
                        title: {
                            text: ''
                        }
                    },
                    tooltip: {
                        // head + 每个 point + footer 拼接成完整的 table
                        headerFormat: '<div style="font-size:10px;text-align: center;">{point.key}时</div><table>',
                        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.1f} 个</b></td></tr>',
                        footerFormat: '</table>',
                        shared: true,
                        useHTML: true
                    },
                    plotOptions: {
                        column: {
                            borderWidth: 0
                        }
                    },
                    series: [{
                        name: '在线',
						dashStyle: "dash",
                        data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4,83.6, 78.8, 98.5, 93.4, 106.0, 84.5, 105.0, 104.3, 91.2, 83.5, 106.6, 92.3]
                    }, {
                        name: '离线',
                        data: [83.6, 78.8, 98.5, 93.4, 106.0, 84.5, 105.0, 104.3, 91.2, 83.5, 106.6, 92.3,49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
                    }]
                },
					function (chart) {

                    }
                );

                var chart = Highcharts.chart('eh3',{
                    chart: {
                        backgroundColor:'', //设置无背景色
                        type: 'line'
                    },
                    //colors: ['#3D7878', '#707038'],
                    title: {
                        text: ''
                    },
                    legend: {
                        enabled: false
                    },
                    credits:{
                        enabled: false // 禁用版权信息
                    },
                    xAxis: {
                        categories: [
                            '01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24'
                        ],
                        crosshair: true
                    },
                    yAxis: {
                        min: 0,
                        title: {
                            text: ''
                        }
                    },
                    tooltip: {
                        // head + 每个 point + footer 拼接成完整的 table
                        headerFormat: '<div style="font-size:10px;text-align: center;">{point.key}时</div><table>',
                        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.1f} 个</b></td></tr>',
                        footerFormat: '</table>',
                        shared: true,
                        useHTML: true
                    },
                    plotOptions: {
                        column: {
                            borderWidth: 0
                        }
                    },
                    series: [{
                        name: '运行',
                        data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4,83.6, 78.8, 98.5, 93.4, 106.0, 84.5, 105.0, 104.3, 91.2, 83.5, 106.6, 92.3]
                    }, {
                        name: '停用',
                        data: [83.6, 78.8, 98.5, 93.4, 106.0, 84.5, 105.0, 104.3, 91.2, 83.5, 106.6, 92.3,49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
                    }]
                },
					function (chart) {

					}
                );
			}

            function SetEveryOnePointColor(chart) {
                //获得第一个序列的所有数据点
                var pointsList0 = chart.series[0].points;
                //遍历设置每一个数据点颜色
                for (var i = 0; i < pointsList0.length; i++) {
                    chart.series[0].points[i].update({
                        color: {
                            linearGradient: { x1: 0, y1: 1, x2: 0, y2: 0 }, //横向渐变效果 如果将x2和y2值交换将会变成纵向渐变效果
                            stops: [
                                [0, Highcharts.Color(colorArr[0]).setOpacity(1).get('rgba')],
                                [1, Highcharts.Color(colorArr[2]).setOpacity(1).get('rgba')]
                            ]
                        }
                    });
                }
                //获得第一个序列的所有数据点
                var pointsList1 = chart.series[1].points;
                //遍历设置每一个数据点颜色
                for (var i = 0; i < pointsList1.length; i++) {
                    chart.series[1].points[i].update({
                        color: {
                            linearGradient: { x1: 0, y1: 1, x2: 0, y2: 0 }, //横向渐变效果 如果将x2和y2值交换将会变成纵向渐变效果
                            stops: [
                                [0, Highcharts.Color(colorArr[1]).setOpacity(1).get('rgba')],
                                [1, Highcharts.Color(colorArr[3]).setOpacity(1).get('rgba')]
                            ]
                        }
                    });
                }
            }
		</script>

	</body>
</html>